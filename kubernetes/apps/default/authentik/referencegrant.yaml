---
# yaml-language-server: $schema=https://datreeio.github.io/CRDs-catalog/gateway.networking.k8s.io/referencegrant_v1alpha2.json
apiVersion: gateway.networking.k8s.io/v1beta1
kind: ReferenceGrant
metadata:
  name: authentik-media-access
  namespace: default
spec:
  # CRITICAL: ReferenceGrant does NOT support wildcards. Each namespace that contains
  # a SecurityPolicy referencing Authentik's external auth service must be explicitly
  # listed here. When creating new SecurityPolicy resources, add the namespace below.
  from:
  - group: gateway.envoyproxy.io
    kind: SecurityPolicy
    namespace: cert-manager
  - group: gateway.envoyproxy.io
    kind: SecurityPolicy
    namespace: cilium-secrets
  - group: gateway.envoyproxy.io
    kind: SecurityPolicy
    namespace: default
  - group: gateway.envoyproxy.io
    kind: SecurityPolicy
    namespace: dns-private
  - group: gateway.envoyproxy.io
    kind: SecurityPolicy
    namespace: flux-system
  - group: gateway.envoyproxy.io
    kind: SecurityPolicy
    namespace: kube-node-lease
  - group: gateway.envoyproxy.io
    kind: SecurityPolicy
    namespace: kube-public
  - group: gateway.envoyproxy.io
    kind: SecurityPolicy
    namespace: kube-system
  - group: gateway.envoyproxy.io
    kind: SecurityPolicy
    namespace: media
  - group: gateway.envoyproxy.io
    kind: SecurityPolicy
    namespace: network
  - group: gateway.envoyproxy.io
    kind: SecurityPolicy
    namespace: nfs
  - group: gateway.envoyproxy.io
    kind: SecurityPolicy
    namespace: observability
  - group: gateway.envoyproxy.io
    kind: SecurityPolicy
    namespace: rook-ceph
  - group: gateway.envoyproxy.io
    kind: SecurityPolicy
    namespace: storage
  to:
  - group: ""
    kind: Service
    name: ak-outpost-authentik-embedded-outpost
