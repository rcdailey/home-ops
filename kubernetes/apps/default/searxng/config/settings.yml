# yaml-language-server: $schema=https://raw.githubusercontent.com/searxng/searxng/master/searx/settings.yml
#
# SearXNG configuration optimized for AI agent access via MCP server.
# This instance is internal-only (VPN-secured), not public-facing.
#
# Note: Placeholder tokens are substituted at runtime by init container.
# Reference: https://docs.searxng.org/admin/settings/settings.html
---
use_default_settings: true

server:
  # Disable rate limiting - internal use with trusted clients only
  limiter: false
  # Disable image proxying - reduces server load, agents fetch directly
  image_proxy: false
  # Not a public instance - disables public instance features
  public_instance: false
  # Unique secret for this instance
  secret_key: "%%SECRET_KEY%%"

search:
  # JSON-only; sole consumer is the MCP server
  formats:
  - json

# Connection pool tuning for concurrent API requests from agents.
# Defaults: pool_connections=100, pool_maxsize=20, request_timeout=3.0
outgoing:
  # Allow slower engines to complete (github, stackoverflow can be slow)
  request_timeout: 5.0
  # Increased for parallel requests from multiple agents
  pool_connections: 150
  pool_maxsize: 30

# Hostnames plugin adjusts result ranking based on domain.
# Prioritizes authoritative technical sources over social/noise sites.
hostnames:
  high_priority:
  - (.*\.)?github\.com$
  - (.*\.)?stackoverflow\.com$
  - (.*\.)?stackexchange\.com$
  - (.*\.)?kubernetes\.io$
  - (.*\.)?docker\.com$
  - (.*\.)?docs\.python\.org$
  - (.*\.)?go\.dev$
  - (.*\.)?rust-lang\.org$
  - (.*\.)?developer\.mozilla\.org$
  low_priority:
  - (.*\.)?pinterest\.com$
  - (.*\.)?facebook\.com$
  - (.*\.)?instagram\.com$

# Engine category overrides: add "general" so IT engines fire on default
# (uncategorized) API queries. The MCP server does not send a categories
# parameter, so only "general" engines are queried by default.
engines:
# Default-enabled engines promoted to general category
- name: stackoverflow
  categories: [general, it, q&a]
- name: askubuntu
  categories: [general, it, q&a]
- name: superuser
  categories: [general, it, q&a]
- name: github
  categories: [general, it, repos]
- name: arch linux wiki
  categories: [general, it, software wikis]
- name: mankier
  categories: [general, it]
# Disabled-by-default engines: enabled and promoted to general
- name: github code
  engine: github_code
  shortcut: ghc
  inactive: false
  categories: [general, it]
  timeout: 10.0
  ghc_auth:
    type: personal_access_token
    token: "%%GITHUB_TOKEN%%"
  ghc_highlight_matching_lines: true
  ghc_strip_new_lines: true
- name: gitlab
  engine: gitlab
  base_url: https://gitlab.com
  shortcut: gl
  disabled: false
  categories: [general, it, repos]
- name: hackernews
  engine: hackernews
  shortcut: hn
  disabled: false
  categories: [general, it]
- name: crates.io
  engine: crates
  shortcut: crates
  disabled: false
  timeout: 6.0
- name: npm
  disabled: false
  timeout: 6.0
- name: codeberg
  disabled: false
  categories: [general, it, repos]
- name: lobste.rs
  disabled: false
  categories: [general, it]

# wikidata - slow, frequently times out, not useful for coding queries
- name: wikidata
  inactive: true

# Tor engines - inactive to prevent "loading engine failed" errors
- name: ahmia
  inactive: true
- name: torch
  inactive: true
