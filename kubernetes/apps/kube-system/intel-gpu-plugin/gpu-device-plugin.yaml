---
apiVersion: deviceplugin.intel.com/v1
kind: GpuDevicePlugin
metadata:
  name: intel-gpu-plugin
spec:
  # Optimized sharing for ML workloads
  sharedDevNum: 2

  # Resource allocation strategy
  preferredAllocationPolicy: balanced

  # Monitoring and health
  enableMonitoring: true
  logLevel: 2

  # Node selection using NFD labels
  nodeSelector:
    feature.node.kubernetes.io/custom-intel-gpu: "true"

  # Image configuration
  image: intel/intel-gpu-plugin:0.32.1
