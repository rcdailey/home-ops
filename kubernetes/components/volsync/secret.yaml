# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/v1/secret.json
---
apiVersion: v1
kind: Secret
metadata:
  name: ${APP}-volsync-secret
type: Opaque
stringData:
  # Kopia repository password - MUST BE SAME for all apps sharing repository
  # Uses shared repository pattern: all apps write to single Kopia repository with
  # isolation handled via username@hostname snapshots (e.g., prowlarr@media:/data)
  # NFS filesystem backend automatically mounted at /repository by MutatingAdmissionPolicy
  #
  # IMPORTANT: This password is also used by Kopia GUI server at:
  # kubernetes/apps/storage/kopia (references /storage/kopia/kopia-password in Infisical)
  # Both locations MUST have identical passwords or backups will fail.
  KOPIA_PASSWORD: volsync-shared-kopia-password

  # Kopia NFS filesystem configuration - shared repository on NFS
  # MutatingAdmissionPolicy automatically injects NFS volume mount at /repository
  # All apps share single repository with isolation via username/hostname snapshots
  KOPIA_REPOSITORY: filesystem:///repository
