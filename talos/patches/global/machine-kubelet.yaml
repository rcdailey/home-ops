machine:
  kubelet:
    extraConfig:
      # DRA (Dynamic Resource Allocation) feature gates
      # ResourceHealthStatus: Enables DRA drivers to report device health status
      # and prevents kubelet from losing gRPC connection to DRA drivers after
      # 30 minutes of inactivity (known issue in K8s v1.34.0-v1.34.1).
      # Required for Intel GPU Resource Driver stability.
      # Ref: https://github.com/intel/intel-resource-drivers-for-kubernetes/blob/main/doc/gpu/USAGE.md#known-issues
      featureGates:
        ResourceHealthStatus: true
      serializeImagePulls: false
      volumeStatsAggPeriod: 1m
      # Image garbage collection configuration
      # Addresses imagefs detection failure by using time-based GC (imageMaximumGCAge)
      # combined with aggressive disk-based thresholds as backup
      imageMaximumGCAge: 168h # Delete images unused for >7 days
      imageGCHighThresholdPercent: 50 # Trigger GC at 50% disk usage
      imageGCLowThresholdPercent: 20 # Clear down to 20% disk usage
    nodeIP:
      validSubnets:
        - 192.168.1.0/24
